<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oil Well Volume Calculator</title>
    <!-- Favicons -->
    <link rel="icon" type="image/jpeg" href="src/assets/KR_fav.jpg" />
    <link rel="shortcut icon" href="src/assets/KR_fav.jpg" />
    <link rel="apple-touch-icon" href="src/assets/KR_fav.jpg" />
    <link rel="stylesheet" href="src/css/style.css" />
  </head>
  <body>
    <a href="#volume-form" class="skip-link">Skip to main content</a>
    <header>
      <div class="headerWrapper">
        <div>
          <a href="https://oniekr.github.io/"
            ><img
              class="firmalogo"
              src="src/assets/KR_fav.jpg"
              alt="Keino logo"
            />
          </a>
        </div>
        <nav>
          <div class="linker">
            <a class="nav-link" href="https://oniekr.github.io/">Home</a>

            <a
              class="nav-link"
              href="https://oniekr.github.io/pressurevolume.github.io/"
              >Volume / pressure</a
            >
          </div>
        </nav>
      </div>
    </header>

    <div id="app">
      <!-- Desktop Sidebar / Mobile Bottom Navigation -->
      <nav
        id="sidebar"
        class="sidebar"
        aria-label="Main navigation"
        role="navigation"
      >
        <div class="sidebar-content">
          <!-- Main Navigation Sections -->
          <div class="sidebar-section">
            <h3 class="sidebar-section-title" id="nav-section-label">
              Navigation
            </h3>
            <ul
              class="sidebar-nav-list"
              role="list"
              aria-labelledby="nav-section-label"
            >
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="casings"
                  aria-label="Navigate to Casings section"
                  role="button"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"
                    />
                  </svg>
                  <span class="sidebar-nav-text">Casings</span>
                </button>
              </li>
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="completion"
                  aria-label="Navigate to Completion and Drillpipe section"
                  role="button"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                    />
                  </svg>
                  <span class="sidebar-nav-text">Completion</span>
                </button>
              </li>
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="flow"
                  aria-label="Navigate to Flow Velocity section"
                  role="button"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-4-4h3V9h2v4h3l-4 4z"
                    />
                  </svg>
                  <span class="sidebar-nav-text"
                    >Flow Velocity
                    <span class="badge badge--construction"
                      >ðŸš§ Under Construction</span
                    >
                  </span>
                </button>
              </li>
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="pressure"
                  aria-label="Navigate to Pressure Test section"
                  role="button"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"
                    />
                  </svg>
                  <!-- Badge indicates Pressure feature is under development; remove when implemented -->
                  <span class="sidebar-nav-text">
                    Pressure
                    <span class="badge badge--construction"
                      >ðŸš§ Under Construction</span
                    >
                  </span>
                </button>
              </li>
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="settings"
                  aria-label="Navigate to Settings section"
                  role="button"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"
                    />
                  </svg>
                  <span class="sidebar-nav-text">Settings</span>
                </button>
              </li>
            </ul>
          </div>

          <!-- Future Features Section -->
          <div class="sidebar-section sidebar-section-future">
            <h3 class="sidebar-section-title" id="future-section-label">
              Coming Soon
            </h3>
            <ul
              class="sidebar-nav-list"
              role="list"
              aria-labelledby="future-section-label"
            >
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="lift"
                  aria-label="String lift calculator (coming soon)"
                  disabled
                  aria-disabled="true"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"
                    />
                  </svg>
                  <span class="sidebar-nav-text">String Lift</span>
                </button>
              </li>
              <li class="sidebar-nav-item" role="listitem">
                <button
                  class="sidebar-nav-button"
                  data-section="cement"
                  aria-label="Cement displacement calculator (coming soon)"
                  disabled
                  aria-disabled="true"
                >
                  <svg
                    class="sidebar-icon"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    aria-hidden="true"
                  >
                    <path
                      d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7V7h2v10zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"
                    />
                  </svg>
                  <span class="sidebar-nav-text">Cement</span>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <main class="left-panel" id="volume-form" aria-labelledby="main-title">
        <h1 id="main-title">Well Volume Calculator</h1>
        <form id="well-form" novalidate>
          <section
            id="view-casings"
            class="app-view"
            data-view="casings"
            aria-label="Casings"
          >
            <div class="input-row">
              <div class="input-inline">
                <label for="riser_subsea">Well type:</label>
                <div class="toggle-inline">
                  <label class="switch">
                    <input
                      type="checkbox"
                      id="riser_subsea"
                      checked
                      role="switch"
                      aria-checked="true"
                      aria-controls="wellhead-depth-container"
                    />
                    <span class="slider round"></span>
                  </label>
                  <span id="riser_position_label" class="small-note-inline"
                    >Subsea -</span
                  >
                </div>
              </div>

              <div
                class="input-inline input-inline--narrow"
                id="wellhead-depth-container"
                aria-hidden="false"
              >
                <label for="wellhead_depth">Wellhead Depth (m):</label>
                <input
                  type="number"
                  id="wellhead_depth"
                  name="wellhead_depth"
                  step="1.0"
                  value="0"
                  min="0"
                />
              </div>
            </div>

            <div class="casing-input" id="casings-section">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_riser"
                  checked
                />
                <h3>Riser</h3>
              </div>
              <div class="casing-body">
                <div class="input-row">
                  <div class="input-inline">
                    <label for="riser_type">Riser type:</label>
                    <div class="size-with-id">
                      <select id="riser_type" name="riser_type">
                        <option value="17.5">Drilling riser</option>
                        <option value="8.5">Production riser</option>
                        <option value="20">Marine riser</option>
                        <option value="none">No riser</option>
                      </select>
                      <input
                        id="riser_type_id"
                        class="size-id-input"
                        type="number"
                        step="0.001"
                        aria-label="Riser type id"
                      />
                    </div>
                  </div>
                  <div
                    class="input-inline input-inline--narrow"
                    id="depth_riser_container"
                  >
                    <label>Depth (m):</label>
                    <input
                      type="number"
                      id="depth_riser"
                      step="1.0"
                      value="0"
                    />
                    <div style="margin-top: 8px">
                      <button
                        type="button"
                        class="wellhead-btn"
                        data-target="depth_riser"
                      >
                        Wellhead
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_18"
                  checked
                />
                <h3>Conductor</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="conductor_size">Size:</label>
                    <div class="size-with-id">
                      <select id="conductor_size" name="conductor_size">
                        <option value="28">30" 309.7# X-52</option>
                        <option value="27">30" 457# X-56</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="conductor_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Conductor size id"
                          />
                        </div>
                        <div class="nom-input-group">
                          <div
                            class="small-note drift-label"
                            aria-live="polite"
                          ></div>
                          <input
                            id="conductor_drift"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Conductor drift"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_18_top">Top (m):</label>
                    <input
                      type="number"
                      id="depth_18_top"
                      name="depth_18_top"
                      step="1.0"
                      placeholder="Optional"
                      title="Double-click to copy Wellhead depth"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="wellhead-btn"
                        data-target="depth_18_top"
                      >
                        Wellhead
                      </button>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_18_bottom"
                      >Shoe (m):</label
                    >
                    <input
                      type="number"
                      id="depth_18_bottom"
                      name="depth_18_bottom"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="conductor_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_13"
                  checked
                />
                <h3>Surface Casing</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="surface_size">Size:</label>
                    <div class="size-with-id">
                      <select id="surface_size" name="surface_size">
                        <option value="17.8" selected>
                          18 5/8" 84.5# X-56
                        </option>
                        <option value="18.73">20" 133# K-55</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="surface_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Surface size id"
                          />
                        </div>
                        <div class="nom-input-group">
                          <div
                            class="small-note drift-label"
                            aria-live="polite"
                          ></div>
                          <input
                            id="surface_drift"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Surface drift"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_13_top">Top (m):</label>
                    <input
                      type="number"
                      id="depth_13_top"
                      name="depth_13_top"
                      step="1.0"
                      placeholder="Optional"
                      title="Double-click to copy Wellhead depth"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="wellhead-btn"
                        data-target="depth_13_top"
                      >
                        Wellhead
                      </button>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_13">Shoe (m):</label>
                    <input
                      type="number"
                      id="depth_13"
                      name="depth_13"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="surface_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_9"
                  checked
                />
                <h3>Intermediate Casing</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="intermediate_size">Size:</label>
                    <div class="size-with-id">
                      <select id="intermediate_size" name="intermediate_size">
                        <option value="12.415">13 3/8" 68# N-80</option>
                        <option value="12.375">13 5/8" 88.2# SM100MS</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="intermediate_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Intermediate size id"
                          />
                        </div>
                        <div class="nom-input-group">
                          <div
                            class="small-note drift-label"
                            aria-live="polite"
                          ></div>
                          <input
                            id="intermediate_drift"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Intermediate drift"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_9_top">Top (m):</label>
                    <input
                      type="number"
                      id="depth_9_top"
                      name="depth_9_top"
                      step="1.0"
                      placeholder="Optional"
                      title="Double-click to copy Wellhead depth"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="wellhead-btn"
                        data-target="depth_9_top"
                      >
                        Wellhead
                      </button>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_9">Shoe (m):</label>
                    <input
                      type="number"
                      id="depth_9"
                      name="depth_9"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="intermediate_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_7"
                  checked
                />
                <h3>Production Casing/liner</h3>
                <label
                  class="header-inline inline-checkbox"
                  style="margin-left: auto"
                >
                  <input type="checkbox" id="production_is_liner" />
                  Tie-back
                </label>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="production_size">Size:</label>
                    <div class="size-with-ctrl">
                      <div class="size-with-id">
                        <select id="production_size" name="production_size">
                          <option value="8.535">9 5/8" 53.5# L-80</option>
                          <option value="8.681">9 5/8" 47# L-80</option>
                        </select>
                        <div class="size-id-inline">
                          <div class="nom-input-group">
                            <div
                              class="small-note nom-id-inline"
                              aria-live="polite"
                            ></div>
                            <input
                              id="production_size_id"
                              class="size-id-input size-id-input--narrow"
                              type="number"
                              step="0.001"
                              aria-label="Production size id"
                            />
                          </div>
                          <div class="nom-input-group">
                            <div
                              class="small-note drift-label"
                              aria-live="polite"
                            ></div>
                            <input
                              id="production_drift"
                              class="size-id-input size-id-input--narrow"
                              type="number"
                              step="0.001"
                              aria-label="Production drift"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label
                      id="production_top_label"
                      class="top-label"
                      for="depth_7_top"
                      >Top (m):</label
                    >
                    <input
                      type="number"
                      id="depth_7_top"
                      name="depth_7_top"
                      step="0.1"
                      placeholder="Optional"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <!-- Casing: copy wellhead depth to Production Top -->
                      <button
                        id="production_casing_btn"
                        type="button"
                        class="wellhead-btn casing-btn"
                        data-target="depth_7_top"
                        aria-label="Copy Wellhead depth to Production top"
                        aria-pressed="false"
                      >
                        Casing
                      </button>

                      <!-- Liner: use Intermediate Bottom - 50m (falls back to wellhead if missing) -->
                      <button
                        type="button"
                        id="production_liner_btn"
                        class="liner-default-btn"
                        aria-label="Default for Liner (uses Intermediate bottom minus 50 m)"
                        title="Default for Liner: uses Intermediate casing bottom minus 50 m"
                        aria-pressed="false"
                      >
                        Liner
                      </button>

                      <!-- Small info button for Liner default -->
                      <button
                        type="button"
                        id="production_liner_info_btn"
                        class="info-btn"
                        style="margin-left: 6px"
                        aria-label="Liner: PBR depth is intermediate casing shoe - 50"
                        title="Liner: PBR depth is intermediate casing shoe - 50"
                      >
                        i
                      </button>
                      <div
                        id="production_liner_info_tooltip"
                        class="info-tooltip hidden"
                        role="tooltip"
                        aria-hidden="true"
                      >
                        Liner: PBR depth is intermediate casing shoe - 50
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_7">Shoe (m):</label>
                    <input
                      type="number"
                      id="depth_7"
                      name="depth_7"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="production_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tie-back Casing: shown when Production 'Liner?' is checked -->
            <div
              class="casing-input hidden"
              id="tieback_casing"
              aria-hidden="true"
            >
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_tieback"
                  checked
                />
                <h3>Tie-back Casing</h3>
                <!-- New control: Dummy hanger (toggle only, functionality to be added later) -->
                <label
                  class="header-inline inline-checkbox"
                  style="margin-left: auto"
                >
                  <input
                    type="checkbox"
                    id="dummy_hanger"
                    aria-label="Dummy hanger"
                  />
                  Dummy hanger
                </label>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="tieback_size">Size:</label>
                    <div class="size-with-id">
                      <select id="tieback_size" name="tieback_size">
                        <option value="8.535" selected>9 5/8" 53.5#</option>
                        <option value="9.66">10 3/4" 60.7#</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="tieback_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Tieback size id"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_tb_top">Top (m):</label>
                    <input
                      type="number"
                      id="depth_tb_top"
                      name="depth_tb_top"
                      step="0.1"
                      placeholder="Optional"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="wellhead-btn"
                        data-target="depth_tb_top"
                      >
                        Wellhead
                      </button>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label for="depth_tb">Bottom (m):</label>
                    <input
                      class="readonly-input"
                      type="number"
                      id="depth_tb"
                      name="depth_tb"
                      step="1.0"
                      value="0"
                      readonly
                    />
                    <div
                      id="tieback_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_5"
                  checked
                />
                <h3>Reservoir Liner</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="reservoir_size">Size:</label>
                    <div class="size-with-id">
                      <select id="reservoir_size" name="reservoir_size">
                        <option value="6.184">7" 29# L-80</option>
                        <option value="4.778">5 1/2" 20# L-80</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="reservoir_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Reservoir size id"
                          />
                        </div>
                        <div class="nom-input-group">
                          <div
                            class="small-note drift-label"
                            aria-live="polite"
                          ></div>
                          <input
                            id="reservoir_drift"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Reservoir drift"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_5_top">Top (m):</label>
                    <input
                      type="number"
                      id="depth_5_top"
                      name="depth_5_top"
                      step="0.1"
                      placeholder="Optional"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="default-top-btn reservoir-default-btn"
                        aria-label="Liner: set Reservoir Top to Production bottom"
                        title="Liner: set Reservoir Top to Production bottom"
                      >
                        Liner
                      </button>
                      <button
                        type="button"
                        id="reservoir_default_info_btn"
                        class="info-btn"
                        style="margin-left: 6px"
                        aria-label="Liner: PBR depth is production casing shoe - 50"
                        title="Liner: PBR depth is production casing shoe - 50"
                      >
                        i
                      </button>
                      <div
                        id="reservoir_default_info_tooltip"
                        class="info-tooltip hidden"
                        role="tooltip"
                        aria-hidden="true"
                      >
                        Liner: PBR depth is production casing shoe - 50
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_5">Shoe (m):</label>
                    <input
                      type="number"
                      id="depth_5"
                      name="depth_5"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="reservoir_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_small_liner"
                  checked
                />
                <h3>Small liner</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="small_liner_size">Size:</label>
                    <div class="size-with-id">
                      <select id="small_liner_size" name="small_liner_size">
                        <option value="3.958">4 1/2" 12.6# L-80</option>
                        <option value="4.276">5" 18# L-80</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="small_liner_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Small liner size id"
                          />
                        </div>
                        <div class="nom-input-group">
                          <div
                            class="small-note drift-label"
                            aria-live="polite"
                          ></div>
                          <input
                            id="small_liner_drift"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.001"
                            aria-label="Small liner drift"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_small_top"
                      >Top (m):</label
                    >
                    <input
                      type="number"
                      id="depth_small_top"
                      name="depth_small_top"
                      step="0.1"
                      placeholder="Optional"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <button
                        type="button"
                        class="default-top-btn small-liner-default-btn"
                        aria-label="Liner: set Small Liner Top to Reservoir shoe - 50"
                        title="Liner: set Small Liner Top to Reservoir shoe - 50"
                      >
                        Liner
                      </button>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="shoe-label" for="depth_small"
                      >Shoe (m):</label
                    >
                    <input
                      type="number"
                      id="depth_small"
                      name="depth_small"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="small_liner_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Open Hole -->
            <div class="casing-input">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_open_hole"
                  checked
                />
                <h3>Open Hole</h3>
              </div>
              <div class="casing-body">
                <div class="input-row three-cols">
                  <div class="input-inline">
                    <label for="open_hole_size">Size:</label>
                    <div class="size-with-id">
                      <select id="open_hole_size" name="open_hole_size">
                        <option value="17.5">17 1/2"</option>
                        <option value="16">16"</option>
                        <option value="12.25">12 1/4"</option>
                        <option value="8.5">8 1/2"</option>
                        <option value="6">6"</option>
                      </select>
                      <div class="size-id-inline">
                        <div class="nom-input-group">
                          <div
                            class="small-note nom-id-inline"
                            aria-live="polite"
                          ></div>
                          <input
                            id="open_hole_size_id"
                            class="size-id-input size-id-input--narrow"
                            type="number"
                            step="0.01"
                            aria-label="Open hole size id"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="input-inline">
                    <label class="top-label" for="depth_open_top"
                      >Top (m):</label
                    >
                    <input
                      type="number"
                      id="depth_open_top"
                      name="depth_open_top"
                      step="0.1"
                      placeholder="Optional"
                      min="0"
                    />
                    <div class="casing-footer-row">
                      <!-- placeholder for potential defaults -->
                    </div>
                  </div>
                  <div class="input-inline">
                    <label for="depth_open">TD (m):</label>
                    <input
                      type="number"
                      id="depth_open"
                      name="depth_open"
                      step="1.0"
                      value="0"
                      min="0"
                    />
                    <div
                      id="open_hole_length_note"
                      class="small-note casing-footer-row"
                      aria-live="polite"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section
            id="view-completion"
            class="app-view"
            data-view="completion"
            aria-label="Completion"
            hidden
          >
            <!-- Toggle between Tubing and Drill Pipe -->
            <div class="completion-mode-toggle-container">
              <div class="toggle-inline">
                <span
                  id="uc_mode_label"
                  class="small-note-inline toggle-label-left"
                  >Tubing</span
                >
                <label
                  class="switch"
                  title="Switch between tubing and drill pipe"
                >
                  <input
                    type="checkbox"
                    id="uc_mode_toggle"
                    class="toggle-input"
                    aria-label="Switch to drill pipe mode"
                  />
                  <span class="slider round" aria-hidden="true"></span>
                </label>
                <span
                  id="uc_mode_label_dp"
                  class="small-note-inline toggle-label-right"
                  >Drill pipe</span
                >
              </div>
            </div>

            <!-- Upper completion: placed inside casings and drawn on top -->
            <div class="casing-input no-hide" id="upper_completion_section">
              <div class="casing-header">
                <input
                  type="checkbox"
                  class="use-checkbox"
                  id="use_upper_completion"
                  checked
                />
                <h3>Completion or DP</h3>
              </div>
              <div class="casing-body">
                <!-- Tubing section (hidden when drill pipe mode active) -->
                <div id="uc_tubing_section" class="uc-tubing-section">
                  <div class="tubing-count-selector">
                    <label>Number of tubing sizes:</label>
                    <div class="tubing-button-group">
                      <button
                        type="button"
                        id="tubing_count_1"
                        class="tubing-count-btn active"
                        data-count="1"
                        aria-label="Select 1 tubing size"
                        aria-pressed="true"
                      >
                        1 Tubing
                      </button>
                      <button
                        type="button"
                        id="tubing_count_2"
                        class="tubing-count-btn"
                        data-count="2"
                        aria-label="Select 2 tubing sizes"
                      >
                        2 Tubings
                      </button>
                      <button
                        type="button"
                        id="tubing_count_3"
                        class="tubing-count-btn"
                        data-count="3"
                        aria-label="Select 3 tubing sizes"
                      >
                        3 Tubings
                      </button>
                    </div>
                  </div>

                  <!-- Tubing size inputs container -->
                  <div id="tubing_inputs_container">
                    <!-- Rows will be populated by script -->
                  </div>
                </div>

                <!-- Drill Pipe section (hidden until drill pipe mode active) -->
                <div
                  id="uc_drillpipe_section"
                  class="uc-drillpipe-section hidden"
                >
                  <div class="drillpipe-count-selector">
                    <label>Number of drill pipe sizes:</label>
                    <div class="drillpipe-button-group">
                      <button
                        type="button"
                        id="drillpipe_count_1"
                        class="drillpipe-count-btn"
                        data-count="1"
                        aria-label="Select 1 drill pipe size"
                      >
                        1 DP
                      </button>
                      <button
                        type="button"
                        id="drillpipe_count_2"
                        class="drillpipe-count-btn"
                        data-count="2"
                        aria-label="Select 2 drill pipe sizes"
                      >
                        2 DPs
                      </button>
                      <button
                        type="button"
                        id="drillpipe_count_3"
                        class="drillpipe-count-btn active"
                        data-count="3"
                        aria-label="Select 3 drill pipe sizes"
                        aria-pressed="true"
                      >
                        3 DPs
                      </button>
                    </div>
                  </div>

                  <!-- Drill pipe size inputs (container for dynamic rows) -->
                  <div id="drillpipe_inputs_container">
                    <!-- Rows will be populated by script -->
                  </div>
                </div>
              </div>
            </div>

            <!-- Upper Completion Volume breakdown table (moved below UC inputs) -->
            <section
              id="upper-completion-breakdown"
              class="volume-breakdown hidden"
              aria-labelledby="upper-completion-breakdown-title"
            >
              <h2 id="upper-completion-breakdown-title">
                Upper Completion breakdown
              </h2>
              <div class="table-wrap">
                <table
                  id="upperCompletionVolumes"
                  class="volume-table"
                  aria-live="polite"
                  aria-describedby="upper-completion-breakdown-note"
                >
                  <thead>
                    <tr>
                      <th scope="col">Depth (m)</th>
                      <th scope="col">Tubing (mÂ³)</th>
                      <th scope="col">Annulus (mÂ³)</th>
                      <th scope="col">length (m)</th>
                      <th scope="col">Tubing (L/m)</th>
                      <th scope="col">Annulus (L/m)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Rows populated by script -->
                  </tbody>
                </table>
                <div id="upper-completion-breakdown-note" class="small-note">
                  UC ID volume and annulus volume (between casing/liner ID and
                  UC tubing OD).
                </div>
              </div>
            </section>

            <div id="poi-section">
              <div class="plug-toggle" aria-hidden="false">
                <label class="inline-checkbox">
                  <input
                    type="checkbox"
                    id="use_plug"
                    checked
                    aria-controls="plug-panel"
                  />
                  Point of interest
                </label>
              </div>

              <div
                id="plug-panel"
                class="plug-panel"
                aria-labelledby="plug-title"
              >
                <h3
                  id="plug-title"
                  style="margin: 0 0 6px 0; text-align: center"
                >
                  Point of interest
                </h3>

                <div class="plug-control">
                  <label for="plug_depth">depth (m):</label>
                  <input
                    type="number"
                    id="plug_depth"
                    name="plug_depth"
                    step="1"
                    placeholder="Optional"
                    value="0"
                    min="0"
                  />
                </div>

                <div class="plug-volumes">
                  <div id="plugAboveVolume" class="hidden">
                    <span class="label">Volume above point of interest:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <!-- Tubing mode POI values -->
                  <div id="plugAboveTubing" class="hidden">
                    <span class="label">Vol above POI in tubing:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugAboveAnnulus" class="hidden">
                    <span class="label">Vol above POI in annulus:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugAboveTubingOpenCasing" class="hidden">
                    <span class="label"
                      >Casing vol between tubing and POI:</span
                    >
                    <span>â€” mÂ³</span>
                  </div>

                  <div id="plugBelowTubing" class="hidden">
                    <span class="label">Vol below POI in tubing:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugBelowAnnulus" class="hidden">
                    <span class="label">Vol below POI in annulus:</span>
                    <span>â€” mÂ³</span>
                  </div>

                  <!-- Drill pipe mode POI values -->
                  <div id="plugAboveDrillpipe" class="hidden">
                    <span class="label">Vol above POI in DP:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugAboveDrillpipeAnnulus" class="hidden">
                    <span class="label">Vol above POI in annulus:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugBelowDrillpipeCrossing" class="hidden">
                    <span class="label">Vol below POI in DP:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugBelowDrillpipeAnnulusCrossing" class="hidden">
                    <span class="label">Vol below POI in annulus:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugBelowDrillpipeNoCross" class="hidden">
                    <span class="label">Casing vol between DP and POI:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <div id="plugBelowDrillpipeAnnulusNoCross" class="hidden">
                    <span class="label">Casing volume below POI:</span>
                    <span>â€” mÂ³</span>
                  </div>
                  <!-- Generic POI values -->

                  <div id="plugBelowVolume" class="hidden">
                    <span class="label">Volume below point of interest:</span>
                    <span>â€” mÂ³</span>
                  </div>

                  <!-- Totals: show after all component volumes -->
                  <div id="plugTotalBelowPOIDrillpipe" class="hidden">
                    <span class="label">Total vol below POI: (DP version)</span>
                    <span>â€” mÂ³</span>
                  </div>

                  <div id="plugTotalBelowPOITubing" class="hidden">
                    <span class="label">Total vol below tubing:</span>
                    <span>â€” mÂ³</span>
                  </div>

                  <div id="plugTotalBelowPOI" class="hidden">
                    <span class="label">Total vol below tubing:</span>
                    <span>â€” mÂ³</span>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section
            id="view-flow"
            class="app-view"
            data-view="flow"
            aria-label="Flow Velocity"
            hidden
          >
            <div class="flow-header">
              <h2>Flow Velocity</h2>
              <p class="small-note">
                Calculate inside-pipe and annulus velocities at each casing
                transition or at a single selected depth.
              </p>
            </div>

            <div class="flow-card">
              <div class="input-row three-cols flow-input-row">
                <div class="input-inline">
                  <label for="flow_rate">Flow rate</label>
                  <input
                    type="number"
                    id="flow_rate"
                    name="flow_rate"
                    step="1"
                    min="0"
                    placeholder="0"
                  />
                </div>
                <div class="input-inline">
                  <label for="flow_rate_unit">Unit</label>
                  <select id="flow_rate_unit" name="flow_rate_unit">
                    <option value="lpm">L/min</option>
                    <option value="gpm">GPM</option>
                    <option value="m3h">mÂ³/h</option>
                    <option value="bpm">BPM</option>
                  </select>
                </div>
                <div class="input-inline">
                  <label>Presets (L/min)</label>
                  <div class="flow-quick-buttons">
                    <button
                      type="button"
                      class="flow-quick-btn"
                      data-flow-lpm="1000"
                    >
                      1000
                    </button>
                    <button
                      type="button"
                      class="flow-quick-btn"
                      data-flow-lpm="2000"
                    >
                      2000
                    </button>
                    <button
                      type="button"
                      class="flow-quick-btn"
                      data-flow-lpm="3000"
                    >
                      3000
                    </button>
                    <button
                      type="button"
                      class="flow-quick-btn"
                      data-flow-lpm="4000"
                    >
                      4000
                    </button>
                    <button
                      type="button"
                      class="flow-quick-btn"
                      data-flow-lpm="5000"
                    >
                      5000
                    </button>
                  </div>
                </div>
              </div>

              <div
                id="flow-rate-error"
                class="small-note warning hidden"
                role="alert"
              ></div>

              <div class="input-row three-cols flow-input-row">
                <div class="input-inline">
                  <label for="flow_pipe_mode_override">Pipe selection</label>
                  <select
                    id="flow_pipe_mode_override"
                    name="flow_pipe_mode_override"
                  >
                    <option value="auto">Auto (use configured mode)</option>
                    <option value="tubing">Tubing</option>
                    <option value="drillpipe">Drill pipe</option>
                  </select>
                  <div id="flow-pipe-mode-note" class="small-note">
                    This only affects Flow Velocity calculations.
                  </div>
                </div>
                <div class="input-inline">
                  <label>Depth mode</label>
                  <div
                    class="toggle-inline flow-toggle-group"
                    role="group"
                    aria-label="Flow depth mode"
                  >
                    <label class="inline-checkbox">
                      <input
                        type="radio"
                        id="flow_depth_mode_all"
                        name="flow_depth_mode"
                        checked
                      />
                      All depths
                    </label>
                    <label class="inline-checkbox">
                      <input
                        type="radio"
                        id="flow_depth_mode_single"
                        name="flow_depth_mode"
                      />
                      Single depth
                    </label>
                  </div>
                </div>
                <div class="input-inline" id="flow-depth-input" hidden>
                  <label for="flow_depth_value">Depth (m)</label>
                  <input
                    type="number"
                    id="flow_depth_value"
                    name="flow_depth_value"
                    step="1"
                    min="0"
                    placeholder="0"
                  />
                  <div class="casing-footer-row">
                    <button
                      type="button"
                      class="wellhead-btn flow-depth-btn"
                      data-target="flow_depth_value"
                      data-source="wellhead_depth"
                    >
                      Use wellhead
                    </button>
                    <button
                      type="button"
                      class="wellhead-btn flow-depth-btn"
                      data-target="flow_depth_value"
                      data-source="depth_open"
                    >
                      Use TD
                    </button>
                  </div>
                </div>
              </div>

              <div class="flow-help-row">
                <button
                  type="button"
                  id="flow_help_info_btn"
                  class="info-btn"
                  aria-label="Flow velocity help"
                >
                  i
                </button>
                <div
                  id="flow_help_info_tooltip"
                  class="info-tooltip hidden"
                  role="tooltip"
                  aria-hidden="true"
                >
                  <p>
                    Flow velocity is computed using the configured tubing or
                    drill pipe sizes and active casing IDs at each depth
                    segment.
                  </p>
                </div>
              </div>
            </div>

            <div id="flow-results-empty" class="flow-empty-state">
              <p class="small-note">
                Enter a flow rate to see velocities by depth segment.
              </p>
            </div>

            <div
              id="flow-results"
              class="flow-results hidden"
              aria-live="polite"
            >
              <div class="flow-summary-grid">
                <div class="flow-summary-card">
                  <h3>Flow rate</h3>
                  <p id="flow-rate-summary">â€”</p>
                  <p class="small-note">
                    Minimum hole cleaning velocity: 0.8 m/s
                  </p>
                </div>
                <div class="flow-summary-card">
                  <h3>Active pipe</h3>
                  <p id="flow-pipe-summary">â€”</p>
                  <p id="flow-casing-summary" class="small-note"></p>
                </div>
                <div class="flow-summary-card">
                  <h3>Velocity summary</h3>
                  <div class="flow-summary-stats">
                    <div>
                      <span>Pipe</span>
                      <strong id="flow-summary-pipe">â€”</strong>
                    </div>
                    <div>
                      <span>Annulus</span>
                      <strong id="flow-summary-annulus">â€”</strong>
                    </div>
                  </div>
                </div>
              </div>

              <div class="flow-results-grid">
                <div class="flow-results-list" id="flow-results-list"></div>
                <div class="flow-schematic-card" aria-label="Flow schematic">
                  <div class="flow-schematic">
                    <div class="flow-schematic-column">
                      <div class="flow-schematic-arrow flow-arrow-up">
                        <span class="flow-arrow-label">Annulus (up)</span>
                        <strong id="flow-schematic-annulus">â€”</strong>
                      </div>
                      <div class="flow-schematic-arrow flow-arrow-down">
                        <span class="flow-arrow-label">Pipe (down)</span>
                        <strong id="flow-schematic-pipe">â€”</strong>
                      </div>
                    </div>
                    <div class="flow-schematic-depth" id="flow-schematic-depth">
                      â€”
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section
            id="view-pressure"
            class="app-view"
            data-view="pressure"
            aria-label="Pressure Test Calculator"
            hidden
          >
            <div class="pressure-header">
              <h2>Pressure Test</h2>
              <p class="small-note">
                Calculate volume required to pressurize selected well sections.
              </p>
            </div>

            <div class="pressure-card">
              <div class="pressure-section-selector">
                <label class="pressure-label">Select Well Sections</label>
                <div
                  id="pressure-section-buttons"
                  class="pressure-section-buttons"
                >
                  <p class="small-note">Loading sections...</p>
                </div>
                <div class="pressure-total-row">
                  <span>Total selected volume:</span>
                  <strong id="pressure-total-volume">0.00 mÂ³</strong>
                </div>
              </div>

              <div class="input-row three-cols pressure-input-row">
                <div class="input-inline">
                  <label for="pressure_low">Low test pressure</label>
                  <div class="input-with-unit">
                    <input
                      type="number"
                      id="pressure_low"
                      name="pressure_low"
                      step="1"
                      min="0"
                      max="1035"
                      value="20"
                      placeholder="20"
                    />
                    <span class="input-unit">bar</span>
                  </div>
                </div>
                <div class="input-inline">
                  <label for="pressure_high">High test pressure</label>
                  <div class="input-with-unit">
                    <input
                      type="number"
                      id="pressure_high"
                      name="pressure_high"
                      step="1"
                      min="0"
                      max="1035"
                      value="345"
                      placeholder="345"
                    />
                    <span class="input-unit">bar</span>
                  </div>
                </div>
                <div class="input-inline">
                  <label for="pressure_k_value">Compressibility (k)</label>
                  <input
                    type="number"
                    id="pressure_k_value"
                    name="pressure_k_value"
                    step="1"
                    min="1"
                    value="18"
                    placeholder="18"
                  />
                </div>
              </div>

              <div class="pressure-quick-row">
                <label>Fluid type presets:</label>
                <div class="pressure-quick-buttons">
                  <button
                    type="button"
                    class="pressure-quick-btn"
                    data-pressure-k="wbm_brine"
                  >
                    WBM/Brine (21)
                  </button>
                  <button
                    type="button"
                    class="pressure-quick-btn"
                    data-pressure-k="obm"
                  >
                    OBM (18)
                  </button>
                  <button
                    type="button"
                    class="pressure-quick-btn"
                    data-pressure-k="base_oil"
                  >
                    Base Oil (14)
                  </button>
                  <button
                    type="button"
                    class="pressure-quick-btn"
                    data-pressure-k="kfls"
                  >
                    KFLS (35)
                  </button>
                </div>
              </div>

              <div
                id="pressure-error"
                class="small-note warning hidden"
                role="alert"
              ></div>
            </div>

            <div id="pressure-results-empty" class="pressure-empty-state">
              <p class="small-note">
                Select well sections and enter pressure values to calculate
                required fluid volumes.
              </p>
            </div>

            <div
              id="pressure-results"
              class="pressure-results hidden"
              aria-live="polite"
            >
              <div class="pressure-results-grid">
                <div class="pressure-result-card">
                  <h3>Low Pressure Test</h3>
                  <p class="pressure-range">
                    0 â†’ <span id="pressure-low-target">20</span> bar
                  </p>
                  <p class="pressure-volume" id="pressure-low-result">â€” L</p>
                </div>
                <div class="pressure-result-card">
                  <h3>High Pressure Test</h3>
                  <p class="pressure-range">
                    <span id="pressure-high-from">20</span> â†’
                    <span id="pressure-high-target">345</span> bar
                  </p>
                  <p class="pressure-volume" id="pressure-high-result">â€” L</p>
                </div>
              </div>
              <div class="pressure-formula-note small-note">
                Formula: V<sub>liters</sub> = (V<sub>mÂ³</sub> Ã—
                Î”P<sub>bar</sub>) / k
              </div>
            </div>
          </section>

          <section
            id="view-settings"
            class="app-view"
            data-view="settings"
            aria-label="Settings"
            hidden
          >
            <h2 style="margin: 0 0 20px 0">Settings</h2>

            <div class="settings-controls-section">
              <!-- Theme Toggle -->
              <div class="settings-control-group">
                <label class="settings-control-label" for="theme_toggle"
                  >Theme</label
                >
                <div id="theme-toggle-container" class="theme-toggle-group">
                  <label class="switch" title="Toggle dark mode">
                    <input
                      id="theme_toggle"
                      type="checkbox"
                      aria-label="Toggle dark mode"
                    />
                    <span class="slider" aria-hidden="true"></span>
                  </label>
                  <span id="theme_label" class="theme-label" aria-live="polite"
                    >Dark mode</span
                  >
                </div>
              </div>

              <!-- Import/Export -->
              <div class="settings-control-group">
                <label class="settings-control-label">Presets</label>
                <div
                  id="import-export-container"
                  class="settings-buttons-group"
                >
                  <button
                    id="import_presets_btn"
                    class="btn-primary settings-button"
                    type="button"
                    aria-label="Import presets from JSON"
                  >
                    Import JSON
                  </button>
                  <button
                    id="export_presets_btn"
                    class="btn-primary settings-button"
                    type="button"
                    aria-label="Export presets to JSON"
                  >
                    Export JSON
                  </button>
                  <input
                    id="import_presets_input"
                    type="file"
                    accept=".json,application/json"
                    style="display: none"
                    aria-hidden="true"
                  />
                </div>
              </div>
            </div>
          </section>
        </form>
      </main>

      <div class="right-panel results-container">
        <h1>Well Schematic</h1>
        <canvas
          id="wellSchematic"
          role="img"
          aria-label="Well schematic showing casings and water column"
        ></canvas>

        <!-- Volume breakdown table -->
        <section
          id="volume-breakdown"
          class="volume-breakdown"
          aria-labelledby="volume-breakdown-title"
        >
          <div class="volume-breakdown-header">
            <h2 id="volume-breakdown-title">Hole volume</h2>
            <div class="volume-option-row">
              <label for="subtract_eod_toggle" class="small-note">
                Subtract DP steel displacement:
              </label>
              <div class="toggle-inline">
                <label class="switch">
                  <input
                    type="checkbox"
                    id="subtract_eod_toggle"
                    checked
                    role="switch"
                    aria-checked="true"
                  />
                  <span class="slider round"></span>
                </label>
                <span id="eod_toggle_label" class="small-note-inline">On</span>
              </div>
            </div>
          </div>
          <div class="table-wrap">
            <table
              id="casingVolumes"
              class="volume-table"
              aria-live="polite"
              aria-describedby="volume-breakdown-note"
            >
              <thead>
                <tr>
                  <th scope="col">Casing</th>
                  <th scope="col">Volume (mÂ³)</th>
                  <th scope="col">Included length (m)</th>
                  <th scope="col">Volume per m (L/m)</th>
                </tr>
              </thead>
              <tbody>
                <!-- Rows populated by script -->
              </tbody>
            </table>
            <div id="volume-breakdown-note" class="small-note">
              Values update automatically when inputs change.
            </div>
          </div>
        </section>

        <section id="presets" class="presets" aria-labelledby="presets-title">
          <h2 id="presets-title">Presets</h2>
          <div class="table-wrap">
            <div class="presets-controls">
              <input type="text" id="preset_name" placeholder="Preset name" />
              <div style="display: flex; gap: 8px; align-items: center">
                <button type="button" id="save_preset_btn">Save</button>
              </div>
              <div
                style="
                  margin-top: 8px;
                  display: flex;
                  gap: 8px;
                  align-items: center;
                "
              >
                <select id="preset_list" aria-label="Saved presets">
                  <option value="">â€” Select a preset â€”</option>
                </select>
                <button type="button" id="load_preset_btn">Load</button>
                <button type="button" id="delete_preset_btn">Delete</button>
              </div>
            </div>
            <div id="presets_note" class="small-note">
              Save and recall named input presets. Built-in presets are loaded
              from <code>well-presets.json</code> and are read-only.
            </div>
          </div>
        </section>
      </div>
    </div>

    <script type="module" src="src/js/presets.js"></script>
    <script type="module" src="src/js/script.js"></script>
  </body>
</html>
